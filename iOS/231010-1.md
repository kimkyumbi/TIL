# 231010-1 / SWIFT / 오류처리의 정의와 방법

우리가 기능을 구현하다 보면 그 기능에서 오류가 생기는 경우가 종종 있다. 

이때 오류가 발생해 그냥 종료되는 것을 방지하기 위해서 오류처리기능을 쓴다. 

## 정의 

애플 공식문서에서는 throw 할 수 있는 에러 값을 나타내는 타입이라고 나와 있다.

오류처리는 프로그램이 오류를 발생시켰을 때 오류를 발견하고 해결하는 과정을 뜻한다.

하지만 오류처리기능은 우리가 작성하는 소스나, 프로그램 밖에서 발생하는 오류는 처리할 수 없다.

```swift
enum ErrorOccurred: Error {
    case errorOne
    case errorTwo
    case errorThree
}
```

다음은 임의의 오류를 표현한 것이다. 

오류의 종류를 열거형으로 표현했고, `Error` 프로토콜을 채택함으로써 오류처리를 위한 타입임을 알 수 있다. 

`ErrorOccurred` 열거형에 Error를 상속했다. `Error` 프로토콜은 요구사항이 없으므로 뒤에 case로 오류를 표현할 것을 만들어주면 된다.

## throw

오류를 예상했으니, 오류 때문에 실행이 되지 않는다면 오류를 던져주어야 한다. 

오류를 던질 때는 `throw` 구문을 사용한다.

## 오류 포착 및 처리

오류를 던지기만 하면 의미가 없다. 오류에 대비해서 던져진 오류를 처리하기 위한 코드도 작성을 해야 한다.

오류를 알리고 사용자에게 선택 권한을 넘겨주어 다음에 어떤 동작을 하게 할 것인지 결정하도록 유도하는 등의 코드를 작성해야 한다.

## try, try?, try!, do - catch

`try, try?, try!, do - catch` 는 모두 오류를 처리하는 방법이다. 

### 함수에서 발생한 오류 알리기

함수에서 발생한 오류를 해당 함수를 호출한 코드에게 알려주는 방법이다.

함수가 오류를 던지면 프로그램의 흐름이 바뀔 가능성이 매우 크다.

따라서 오류를 어디서 던지고 받을지 결정을 잘해주어야 한다.

throw를 이용하여 던진 오류를 try를 이용해서 그 오류를 있는 것은 알지만 시도는 해볼게라는 의미이다.

try는 try, try!, try?를 통해서 표현을 할 수 있습니다. 따라서 이 3종류에 대한 특징을 알아보겠습니다.

### try 

`try` 는 무조건 do - catch 문과 같이 써야 한다.

오류가 발생하면 프로그램이 종료되지 않고 catch를 실행시킨다. 

### try?

`try?` 는 do - catch 문 없이 사용 가능하다. 

에러가 발생하면 nil을 리턴한다. 

에러가 발생하지 않는다면 옵셔널이 래핑되어서 반환한다.

### try!

`try!` 는 에러가 발생하면 크래시가 난다. (강제 종료)

반환타입은 언래핑되어 나오게 된다.

오류가 발생하지 않는다는 전제 하에 사용해야 한다. 

### do - catch 문

함수, 메서드, 이니셜라이저에서 오류를 던져주면 오류 발생을 받은 코드 블록은 `do - catch` 구문을 사용해서 오류처리를 해주면 된다.

do 절 내부에서 try 코드를 통해 오류를 실행시켜 보고 그 오류를 던져 catch문을 통해 try를 통해 받은 오류를 전달받는다. 

```swift
do {
        try 오류 발생 가능 코드
       오류가 발생하지 않으면 실행하는 코드
   } catch 오류 패턴 1 {
        처리 코드
   } catch 오류 패턴 2 where 추가 조건 {
   	    처리 코드
   }
```

